Tween 动画函数封装
---------

1、Tween.js 应用 [查看](index1.html)

2、写一个能够执行数学函数的通用的 js 动画函数 [查看](index2.html)

3、从数学概念中理解函数，然后抛弃数学概念

> 其实早期我从文字逻辑上理解CSS 的 animation-timing-function，总是翻译成时间函数，然后自己跟自己打架——时间函数为什么能够作用在路径变化上呢？头疼，算了，只管用吧。

> 其实从例子 1 中我们可以看到：我们通过Tween的函数，只是得出了在2秒内，我们任意给个时间，函数返回此时的值，tween中其他三个参数在我们输入之后其实都是固定的，只有第一个参数是变化的。

> 那么我们能否自己写一个这样的函数呢？也是传递进入四个参数进去，然后每次改变第一个参数值，得到返回值

> 我们先来看一下四个参数，

```js
/*
* t: current time（当前时间）；
* b: beginning value（初始值）；
* c: change in value（变化量）； // 是变化的量，并不是结束值
* d: duration（持续时间）。
*/
```

> b 和 c 的值最好理解，b我们可以直接传递0，即我们假设初始状态是0，此时变化量c也就是最后的位置，也就是从0到c的区间范围

> t 和 d 的值其实我们细想一下，跟时间并没有半毛钱关系，因为在函数来讲是没有文字的概念的，有的只是数字的比例关系。四个参数放在一起理解就是，在从0到c的过程中，总共有总数为d的取值区间，t的取值是从0到d，当从0到d递增的时候，也就是每次我们传递t进去，我们会得到一个对应的返回值，此时t就相当于我们学过的数学函数 y=f(x) 中的x，而返回值就是y，y随着x的增加而变化的曲线，就是这个函数。

> 也就是说Tween其实只是一堆数学函数模型而已，t 和 d 的参数只是为了方便套用动画的持续时间概念。所以，我们大可以随意改变d的值，比如我们想得到Tween中某个函数当x从0到100时，y的变化曲线。可以[查看](index3.html)

> 手动封装匀速运动

```js
function yunsu(t, b, c, d) {
    return c * t / d + b;
}
```
> 我们发现，自行封装的匀速公式跟Tween.Linear是一样的，当然，他们本来就是同一个概念。

> 手动封装匀加速运动，我们从网上可以搜索一下匀加速运动的公式，你肯定会得到公式，路径 = (1/2) * 加速度 * 时间的二次方 S = (1 / 2) * a * t * t

```js
function yunjiasu(t, b, c, d) {
    var a = c / (.5 * d * d); // 通过c 和 d 求出加速度
    return a * t * t * .5 + b; // 通过加速度和t求出当前值
}
```

> 首先从曲线上我们可以发现匀加速运动的曲线跟二阶贝塞尔曲线 easeIn的曲线一模一样，通过精简上方匀加速函数，可以发现公式其实是一样的

> [查看所有的Tween函数曲线](index4.html)

3、优化：能够同时执行多个动画，每个动画执行不同的数学函数

> 其实，观察index4.html的函数模型，每个曲线我们都可以理解成，当x执行Linear函数，y执行其他函数时的曲线。放到canvas中来理解，我们让一个点的x和y分别执行不同的函数，可以得到更复杂的动画效果。

4、优化：能够传入自定义时间函数，或者自定义如三阶贝塞尔曲线的参考点来执行动画


参考

* [GreenSock-TweenMax]()
* [张鑫旭](http://www.zhangxinxu.com/wordpress/2013/09/css3-animation-requestanimationframe-tween-%E5%8A%A8%E7%94%BB%E7%AE%97%E6%B3%95/)